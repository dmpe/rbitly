---
title: "Tutorial for urlshorteneR - v4"
author: "dmpe @ github"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Tutorial for urlshorteneR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
  
`urlshorteneR` wrapps 2 services [Bit.ly](https://bitly.com) and [is.gd/v.gd](https://is.gd). 
In order to begin shortening URLs and downloading usefull statistics about short links, you have to -- in the case of <http://bit.ly> -- authenticate using oAuth2.0. 
For is.gd/v.gd there is no authentication needed. 

# Bit.ly

## User Information / Authentication for Bit.ly

Return some basic information about my user on Bit.ly. Additionally, is the account "premium" one?

```{r}
library(urlshorteneR)

if (interactive()) {

# You can register a new pair of keys yourself - but you can also use mine - an option which is also by default
# bitly_token <- bitly_auth(key = "be03aead58f23bc1aee6e1d7b7a1d99d62f0ede8", secret = "c7eb384b2f4ce4b109fe616f1c9455e4f7735917")

bitly_token <- bitly_auth()

ui <- bitly_UserInfo(showRequestURL = TRUE) 
is_user_premium_account_holder()
}
```

We can also decide to update my username with a different one.

```{r}
library(urlshorteneR)

if (interactive()) {
update_user(name= "John Malc", showRequestURL = TRUE)
}
```

## Group Information

Official API documentation <http://dev.bitly.com/link_metrics.html>.

This returns users, who have encoded `http://bit.ly/DPetrov` link sorted by the number of clicks on each encoding user's link.

```{r}
if (interactive()) {

bitly_LinksMetricsEncodersByCount(link = "http://bit.ly/DPetrov", my_network = "false", limit = 100)
}
```


## Information about Organizations

Official API documentation <http://dev.bitly.com/user_info.html>. 

The first method returns an information about myself, whereas the second one returns a list of tracking domains I have configured (I have none).

```{r}
if (interactive()) {

bitly_UserInfo()

bitly_UserTrackingDomains()
}
```


## Bitlinks

Official API documentation <http://dev.bitly.com/domains.html>. 

This will query whether a given domain is a valid Bit.ly PRO domain (nyti.ms is). 

```{r}
if (interactive()) {

bitly_IsProDomain(domain = "nyti.ms")
}
```

### Custom Bitlinks

```{r}
if (interactive()) {
  df <- data.frame(pubDate = rep("2016-02-10", 4),
                   link = c(NA,"http://www.opencoesione.gov.it/progetti/1misepac01_000443/",
                            "http://www.opencoesione.gov.it/progetti/1misepac01_000031/", ""),
                   stringsAsFactors = FALSE)
  df
  
  fin = NULL
  for (p in 1:length(df$link)) {
    fin[[p]] <- bitly_LinksShorten(longUrl = df$link[p])
  }
}
```

BEWARE: This will proceed only with the two real links, not with the NA, NULL or an empty string. 
Therefore, you will recieve X number of messages describing the error. These, however, will not stop the flow of the code (i.e. are not errors). 



## Campaigns

# Is.gd

```{r}
isgd_LinksShorten(longUrl = "http://cnn.com/", showRequestURL = TRUE)
```


# V.gd

```{r}
vgd_LinksShorten(longUrl = "http://cbs.com/", showRequestURL = TRUE)
```

